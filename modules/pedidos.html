<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Farmacia Digital - Mis Pedidos</title>
  <link rel="icon" type="image/png" href="../assets/images/logo2.png">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    /* Reset y estilos base */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
      color: #333;
    }

    /* Estilos del bot√≥n hamburguesa */
    .menu-btn {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 8px 12px;
      margin-right: 15px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .menu-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
    }
    
    /* Estilos del men√∫ lateral */
    .side-menu {
      position: fixed;
      top: 0;
      left: -280px;
      width: 280px;
      height: 100vh;
      background: linear-gradient(135deg, #00A8E8 0%, #00D9C0 100%);
      padding: 20px;
      transition: left 0.3s ease;
      z-index: 1001;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    }
    
    .side-menu.active {
      left: 0;
    }
    
    .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    
    .menu-title {
      color: white;
      font-size: 20px;
      font-weight: 700;
    }
    
    .close-btn {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 5px;
      transition: all 0.3s ease;
    }
    
    .close-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
    }
    
    .menu-items {
      list-style: none;
    }
    
    .menu-item {
      margin-bottom: 15px;
    }
    
    .menu-item a {
      color: white;
      text-decoration: none;
      display: flex;
      align-items: center;
      padding: 12px 16px;
      border-radius: 10px;
      transition: all 0.3s ease;
      font-weight: 500;
    }
    
    .menu-item a:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateX(5px);
    }
    
    .menu-item a.active {
      background: rgba(255, 255, 255, 0.2);
      border-left: 4px solid white;
    }
    
    .menu-item i {
      margin-right: 12px;
      font-size: 18px;
      width: 20px;
      text-align: center;
    }

    /* Navbar */
    .navbar {
      background: linear-gradient(135deg, #00A8E8 0%, #00D9C0 100%);
      color: white;
      padding: 1rem 2rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .navbar-brand {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0;
    }

    .navbar-brand h1 {
      font-size: 1.5rem;
      font-weight: bold;
      cursor: pointer;
    }

    .navbar-brand img {
      height: 40px;
      width: 40px;
      object-fit: contain;
    }

    .navbar-user {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .cart-icon {
      position: relative;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      padding: 0.75rem;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.2rem;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .cart-icon:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }
    
    .cart-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #ff4444;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: bold;
    }
    
    .logout-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
    }
    
    .logout-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* Contenedor principal */
    .orders-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
    }

    .orders-header {
      text-align: center;
      margin-bottom: 3rem;
      padding: 2rem 0;
    }

    .orders-header h1 {
      font-size: 2.5rem;
      color: #00A8E8;
      margin-bottom: 1rem;
      font-weight: 700;
    }

    .orders-header p {
      font-size: 1.1rem;
      color: #666;
      max-width: 700px;
      margin: 0 auto;
    }

    /* Filtros de pedidos */
    .orders-filters {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }

    .filters-title {
      font-size: 1.3rem;
      color: #00A8E8;
      margin-bottom: 1.5rem;
      font-weight: 600;
    }

    .filters-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
    }

    .filter-group label {
      font-weight: 500;
      color: #333;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .filter-group select,
    .filter-group input {
      padding: 0.75rem;
      border: 2px solid #e9ecef;
      border-radius: 10px;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      background: white;
    }

    .filter-group select:focus,
    .filter-group input:focus {
      outline: none;
      border-color: #00A8E8;
      box-shadow: 0 0 0 3px rgba(0, 168, 232, 0.1);
    }

    .filters-actions {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }

    .filter-btn,
    .clear-filters-btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 10px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .filter-btn {
      background: linear-gradient(135deg, #00A8E8 0%, #00D9C0 100%);
      color: white;
    }

    .filter-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 168, 232, 0.3);
    }

    .clear-filters-btn {
      background: #f8f9fa;
      color: #6c757d;
      border: 2px solid #dee2e6;
    }

    .clear-filters-btn:hover {
      background: #e9ecef;
      border-color: #adb5bd;
    }

    /* Estad√≠sticas de pedidos */
    .orders-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }

    .stat-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      color: #00A8E8;
      margin-bottom: 0.5rem;
    }

    .stat-label {
      color: #666;
      font-size: 1rem;
      font-weight: 500;
    }

    /* Lista de pedidos */
    .orders-list {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .order-card {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .order-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }

    .order-header {
      background: linear-gradient(135deg, #00A8E8 0%, #00D9C0 100%);
      color: white;
      padding: 1.5rem 2rem;
    }

    .order-header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .order-info h3 {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .order-date {
      opacity: 0.9;
      font-size: 0.9rem;
    }

    .order-status {
      padding: 0.5rem 1rem;
      border-radius: 25px;
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-pending {
      background: #ffc107;
      color: #856404;
    }

    .status-processing {
      background: #17a2b8;
      color: white;
    }

    .status-shipped {
      background: #fd7e14;
      color: white;
    }

    .status-delivered {
      background: #28a745;
      color: white;
    }

    .status-cancelled {
      background: #dc3545;
      color: white;
    }

    .order-total {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .order-body {
      padding: 2rem;
    }

    .order-products {
      margin-bottom: 1.5rem;
    }

    .products-title {
      font-size: 1.1rem;
      color: #00A8E8;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .product-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      background: #f8f9fa;
      border-radius: 10px;
      margin-bottom: 0.5rem;
    }

    .product-info {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex: 1;
    }

    .product-icon {
      font-size: 2rem;
      width: 50px;
      text-align: center;
    }

    .product-details h4 {
      font-size: 1rem;
      color: #333;
      margin-bottom: 0.25rem;
    }

    .product-details p {
      font-size: 0.9rem;
      color: #666;
    }

    .product-quantity {
      font-weight: 600;
      color: #00A8E8;
      margin: 0 1rem;
    }

    .product-price {
      font-weight: 700;
      color: #333;
      font-size: 1.1rem;
    }

    .order-details {
      background: #f8f9fa;
      padding: 1.5rem;
      border-radius: 10px;
      margin-bottom: 1.5rem;
    }

    .details-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }

    .detail-item {
      display: flex;
      flex-direction: column;
    }

    .detail-label {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 0.25rem;
    }

    .detail-value {
      font-weight: 600;
      color: #333;
    }

    .order-actions {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
      flex-wrap: wrap;
    }

    .action-btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 10px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
    }

    .btn-primary {
      background: linear-gradient(135deg, #00A8E8 0%, #00D9C0 100%);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 168, 232, 0.3);
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background: #5a6268;
      transform: translateY(-2px);
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .btn-danger:hover {
      background: #c82333;
      transform: translateY(-2px);
    }

    /* Estado vac√≠o */
    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }

    .empty-state-icon {
      font-size: 4rem;
      margin-bottom: 1.5rem;
      opacity: 0.6;
    }

    .empty-state h3 {
      font-size: 1.5rem;
      color: #333;
      margin-bottom: 1rem;
    }

    .empty-state p {
      color: #666;
      margin-bottom: 2rem;
      line-height: 1.6;
    }

    .empty-state-btn {
      background: linear-gradient(135deg, #00A8E8 0%, #00D9C0 100%);
      color: white;
      padding: 1rem 2rem;
      border-radius: 25px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      display: inline-block;
    }

    .empty-state-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0, 168, 232, 0.3);
    }

    /* Modal del carrito */
    .cart-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      animation: fadeIn 0.3s ease;
    }

    .cart-modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .cart-content {
      background-color: white;
      border-radius: 20px;
      padding: 2rem;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      animation: slideIn 0.3s ease;
    }

    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid #eee;
    }

    .cart-title {
      color: #00A8E8;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .close-cart {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
      padding: 0.5rem;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .close-cart:hover {
      background: #f0f0f0;
      color: #333;
    }

    .carrito-vacio {
      text-align: center;
      padding: 3rem;
      color: #666;
    }

    .empty-cart-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0.6;
    }

    .carrito-productos {
      margin-bottom: 1.5rem;
    }

    .carrito-producto {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      background: #f8f9fa;
      border-radius: 10px;
      margin-bottom: 1rem;
    }

    .carrito-producto-imagen {
      font-size: 2rem;
      width: 50px;
      text-align: center;
    }

    .carrito-producto-info {
      flex: 1;
      margin-left: 1rem;
    }

    .carrito-producto-titulo {
      font-weight: 600;
      color: #333;
      margin-bottom: 0.25rem;
    }

    .carrito-producto-descripcion {
      font-size: 0.9rem;
      color: #666;
    }

    .carrito-producto-precio {
      font-weight: 700;
      color: #00A8E8;
      margin: 0 1rem;
    }

    .carrito-producto-cantidad {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin: 0 1rem;
    }

    .carrito-producto-cantidad button {
      background: #00A8E8;
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .carrito-producto-cantidad span {
      min-width: 30px;
      text-align: center;
      font-weight: 600;
    }

    .carrito-producto-eliminar {
      background: #dc3545;
      color: white;
      border: none;
      padding: 0.5rem;
      border-radius: 50%;
      cursor: pointer;
      font-size: 0.9rem;
      width: 35px;
      height: 35px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .carrito-acciones {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 1rem;
      border-top: 2px solid #eee;
    }

    .carrito-acciones.disabled {
      display: none;
    }

    .carrito-acciones-vaciar {
      background: #dc3545;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 500;
    }

    .carrito-acciones-derecha {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .carrito-acciones-total {
      text-align: right;
    }

    .carrito-acciones-total p:first-child {
      color: #666;
      margin-bottom: 0.25rem;
    }

    .carrito-acciones-total p:last-child {
      font-size: 1.5rem;
      font-weight: 700;
      color: #00A8E8;
    }

    .carrito-acciones-comprar {
      background: linear-gradient(135deg, #00A8E8 0%, #00D9C0 100%);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 500;
      font-size: 1rem;
    }

    .carrito-comprado {
      text-align: center;
      padding: 2rem;
      background: #d4edda;
      border-radius: 10px;
      margin-top: 1rem;
    }

    .carrito-comprado.disabled {
      display: none;
    }

    .success-icon {
      font-size: 3rem;
      color: #28a745;
      margin-bottom: 1rem;
    }

    .success-message {
      color: #155724;
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideIn {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .alert {
      position: fixed;
      top: 100px;
      right: 20px;
      background: #28a745;
      color: white;
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      transform: translateX(400px);
      transition: all 0.3s ease;
      z-index: 500;
      font-weight: 600;
      max-width: 300px;
      font-size: 14px;
    }
    
    .alert.show {
      transform: translateX(0);
    }

    /* CONFIGURACI√ìN PARA SWEETALERT2 */
    .swal2-container {
      z-index: 10000 !important;
    }
    
    .swal2-popup {
      z-index: 10001 !important;
    }
    
    .swal2-backdrop-show {
      z-index: 9999 !important;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .orders-container {
        padding: 1rem;
      }

      .orders-header h1 {
        font-size: 2rem;
      }

      .filters-grid {
        grid-template-columns: 1fr;
      }

      .orders-stats {
        grid-template-columns: repeat(2, 1fr);
      }

      .order-header-content {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }

      .product-item {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
      }

      .product-price {
        text-align: center;
      }

      .order-actions {
        justify-content: center;
        flex-direction: column;
      }

      .action-btn {
        width: 100%;
        text-align: center;
      }

      .navbar {
        padding: 1rem;
      }

      .navbar-brand h1 {
        font-size: 1.2rem;
      }

      .cart-content {
        width: 95%;
        padding: 1.5rem;
      }
    }

    @media (max-width: 480px) {
      .orders-stats {
        grid-template-columns: 1fr;
      }

      .stat-number {
        font-size: 2rem;
      }

      .filters-actions {
        flex-direction: column;
      }

      .filter-btn,
      .clear-filters-btn {
        width: 100%;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="menu-overlay" id="menu-overlay"></div>
  
  <!-- Men√∫ lateral -->
 <nav class="side-menu" id="side-menu">
    <div class="menu-header">
      <span class="menu-title">Men√∫</span>
      <button class="close-btn" id="close-btn">&times;</button>
    </div>
    <ul class="menu-items">
  <li class="menu-item"><a href="usuario-dashboard.html">üè† Inicio</a></li>
       <li class="menu-item"><a href="perfil.html">üë§ Mi perfil</a></li>
             <li class="menu-item"><a href="doctores.html">üë®‚Äç‚öï Buscar doctores</a></li>
      <li class="menu-item"><a href="pedidos.html">üì¶ Mis Pedidos</a></li>
      <li class="menu-item"><a href="contactos.html">üìû Contacto</a></li>
    </ul>
  </nav>

  <!-- Elfsight AI Chatbot | Asistente Farmacia Digital -->
<script src="https://elfsightcdn.com/platform.js" async></script>
<div class="elfsight-app-1b12611d-b7f6-4184-b3d6-911c87582fb9" data-elfsight-app-lazy></div>

  <nav class="navbar">
    <div style="display: flex; align-items: center;">
      <!-- Bot√≥n hamburguesa -->
      <button class="menu-btn" id="menu-btn">‚ò∞</button>
      <div class="navbar-brand">
        <img src="../assets/images/logo2.png" alt="Farmacia Digital">
        <h1 onclick="location.href='usuario-dashboard.html'">Farmacia Digital</h1>
      </div>
    </div>
    <div class="navbar-user">
      <div class="cart-icon" onclick="viewCart()">
        üõí
        <span class="cart-count" id="cartCount">0</span>
      </div>
      <span class="user-info" id="userName">Usuario</span>
      <button class="logout-btn" onclick="logout()">Cerrar Sesi√≥n</button>
    </div>
  </nav>

  <div class="orders-container">
    <div class="orders-header">
      <h1>Mis Pedidos</h1>
      <p>Gestiona y revisa todos tus pedidos de medicamentos. Aqu√≠ puedes ver el estado, detalles y realizar acciones sobre tus compras.</p>
    </div>

    <!-- Filtros -->
    <div class="orders-filters">
      <h3 class="filters-title">üîç Filtrar Pedidos</h3>
      <div class="filters-grid">
        <div class="filter-group">
          <label for="statusFilter">Estado del Pedido</label>
          <select id="statusFilter">
            <option value="">Todos los estados</option>
            <option value="pending">Pendiente</option>
            <option value="processing">Procesando</option>
            <option value="shipped">Enviado</option>
            <option value="delivered">Entregado</option>
            <option value="cancelled">Cancelado</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="dateFromFilter">Desde</label>
          <input type="date" id="dateFromFilter">
        </div>
        <div class="filter-group">
          <label for="dateToFilter">Hasta</label>
          <input type="date" id="dateToFilter">
        </div>
        <div class="filter-group">
          <label for="amountFilter">Monto m√≠nimo</label>
          <input type="number" id="amountFilter" placeholder="$0.00" min="0" step="0.01">
        </div>
      </div>
      <div class="filters-actions">
        <button class="filter-btn" onclick="applyFilters()">Aplicar Filtros</button>
        <button class="clear-filters-btn" onclick="clearFilters()">Limpiar Filtros</button>
      </div>
    </div>

    <!-- Estad√≠sticas -->
    <div class="orders-stats">
      <div class="stat-card">
        <div class="stat-icon">üì¶</div>
        <div class="stat-number" id="totalOrders">0</div>
        <div class="stat-label">Total de Pedidos</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üí∞</div>
        <div class="stat-number" id="totalSpent">$0.00</div>
        <div class="stat-label">Total Gastado</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-number" id="deliveredOrders">0</div>
        <div class="stat-label">Pedidos Entregados</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üöö</div>
        <div class="stat-number" id="pendingOrders">0</div>
        <div class="stat-label">En Proceso</div>
      </div>
    </div>

    <!-- Lista de pedidos -->
    <div class="orders-list" id="ordersList">
      <!-- Los pedidos se cargar√°n din√°micamente -->
    </div>

    

  <!-- Modal del carrito -->
  <div id="cartModal" class="cart-modal">
    <div class="cart-content">
      <div class="cart-header">
        <h2 class="cart-title">üõí Mi Carrito</h2>
        <button class="close-cart" onclick="closeCart()">√ó</button>
      </div>
      
      <div class="carrito-vacio" id="carritoVacio">
        <div class="empty-cart-icon">üõí</div>
        <p>Tu carrito est√° vac√≠o</p>
      </div>
      
      <div class="carrito-productos" id="carritoProductos"></div>
      
      <div class="carrito-acciones" id="carritoAcciones">
        <div class="carrito-acciones-izquierda">
          <button class="carrito-acciones-vaciar" id="vaciarCarrito">Vaciar carrito</button>
        </div>
        <div class="carrito-acciones-derecha">
          <div class="carrito-acciones-total">
            <p>Total:</p>
            <p id="totalAmount">$0.00</p>
          </div>
          <button class="carrito-acciones-comprar" id="comprarAhora">Comprar ahora</button>
        </div>
      </div>
      
      <div class="carrito-comprado disabled" id="carritoComprado">
        <div class="success-icon">‚úì</div>
        <p>¬°Compra realizada con √©xito!</p>
        <p class="success-message">Gracias por tu compra en Farmacia Digital</p>
      </div>
    </div>
  </div>

  <div id="alert" class="alert"></div>

  <script>
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  let orders = [];
  let filteredOrders = [];

  // Datos de ejemplo para demostrar funcionalidad (fallback)
  const sampleOrders = [
      {
        id: 'ORD-2024-001',
        date: '2024-10-10',
        status: 'delivered',
        total: 45.99,
        products: [
          { id: 1, name: 'Acetaminof√©n 500mg', description: 'Caja con 20 tabletas', icon: 'üíä', quantity: 2, price: 15.99 },
          { id: 2, name: 'Vitamina C 1000mg', description: 'Frasco con 60 c√°psulas', icon: 'üü°', quantity: 1, price: 14.01 }
        ],
        deliveryAddress: 'Av. Principal 123, Ciudad',
        trackingNumber: 'TRK1728567890123'
      },
      {
        id: 'ORD-2024-002',
        date: '2024-10-12',
        status: 'shipped',
        total: 89.97,
        products: [
          { id: 3, name: 'Ibuprofeno 600mg', description: 'Caja con 30 tabletas', icon: 'üíä', quantity: 3, price: 29.99 }
        ],
        deliveryAddress: 'Calle Secundaria 456, Ciudad',
        trackingNumber: 'TRK1728654321098'
      },
      {
        id: 'ORD-2024-003',
        date: '2024-10-14',
        status: 'processing',
        total: 156.45,
        products: [
          { id: 4, name: 'Omeprazol 20mg', description: 'Caja con 28 c√°psulas', icon: 'üíä', quantity: 2, price: 35.99 },
          { id: 5, name: 'Complejo B', description: 'Frasco con 90 tabletas', icon: 'üíõ', quantity: 1, price: 24.47 },
          { id: 6, name: 'Calcio + Vitamina D', description: 'Frasco con 60 tabletas', icon: '‚ö™', quantity: 3, price: 32.00 }
        ],
        deliveryAddress: 'Av. Central 789, Ciudad',
        trackingNumber: 'TRK1728741852963'
      }
    ];

    // Inicializar pedidos con datos de ejemplo si no hay datos guardados
    function initializeOrders() {
      const storedOrders = localStorage.getItem('orders');
      if (!storedOrders || JSON.parse(storedOrders).length === 0) {
        orders = [...sampleOrders];
        localStorage.setItem('orders', JSON.stringify(orders));
      } else {
        orders = JSON.parse(storedOrders);
      }
      filteredOrders = [...orders];
    }

    function updateCartCount() {
      const count = cart.reduce((sum, item) => sum + item.cantidad, 0);
      document.getElementById('cartCount').textContent = count;
    }

    function viewCart() {
      mostrarCarrito();
      document.getElementById('cartModal').classList.add('active');
    }

    function closeCart() {
      document.getElementById('cartModal').classList.remove('active');
      document.getElementById('carritoComprado').classList.add('disabled');
      document.getElementById('carritoAcciones').classList.remove('disabled');
    }

    function mostrarCarrito() {
      const carritoVacio = document.getElementById('carritoVacio');
      const carritoProductos = document.getElementById('carritoProductos');
      const carritoAcciones = document.getElementById('carritoAcciones');

      if (cart.length === 0) {
        carritoVacio.style.display = 'block';
        carritoProductos.style.display = 'none';
        carritoAcciones.style.display = 'none';
      } else {
        carritoVacio.style.display = 'none';
        carritoProductos.style.display = 'block';
        carritoAcciones.style.display = 'flex';

        carritoProductos.innerHTML = '';
        let total = 0;

        cart.forEach((producto, index) => {
          const subtotal = producto.price * producto.cantidad;
          total += subtotal;

          const div = document.createElement('div');
          div.classList.add('carrito-producto');
          div.innerHTML = `
            <div class="carrito-producto-imagen">${producto.icon}</div>
            <div class="carrito-producto-info">
              <h4 class="carrito-producto-titulo">${producto.name}</h4>
              <p class="carrito-producto-descripcion">${producto.description}</p>
            </div>
            <div class="carrito-producto-cantidad">
              <button onclick="cambiarCantidad(${index}, -1)">-</button>
              <span>${producto.cantidad}</span>
              <button onclick="cambiarCantidad(${index}, 1)">+</button>
            </div>
            <div class="carrito-producto-precio">$${subtotal.toFixed(2)}</div>
            <button class="carrito-producto-eliminar" onclick="eliminarDelCarrito(${index})">üóëÔ∏è</button>
          `;
          carritoProductos.appendChild(div);
        });

        document.getElementById('totalAmount').textContent = `$${total.toFixed(2)}`;
      }
    }

    function cambiarCantidad(index, cambio) {
      if (cart[index].cantidad + cambio > 0) {
        cart[index].cantidad += cambio;
      } else {
        cart.splice(index, 1);
      }
      
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      mostrarCarrito();
    }

    function eliminarDelCarrito(index) {
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      mostrarCarrito();
    }

    function getStatusText(status) {
      const statusMap = {
        'pending': 'Pendiente',
        'processing': 'Procesando',
        'shipped': 'Enviado',
        'delivered': 'Entregado',
        'cancelled': 'Cancelado'
      };
      return statusMap[status] || status;
    }

    function renderOrders() {
      const ordersList = document.getElementById('ordersList');
      const emptyState = document.getElementById('emptyState');

      if (filteredOrders.length === 0) {
        ordersList.style.display = 'none';
        emptyState.style.display = 'block';
        return;
      }

      ordersList.style.display = 'block';
      emptyState.style.display = 'none';
      ordersList.innerHTML = '';

      filteredOrders.forEach(order => {
        const orderCard = document.createElement('div');
        orderCard.className = 'order-card';
        orderCard.innerHTML = `
          <div class="order-header">
            <div class="order-header-content">
              <div class="order-info">
                <h3>Pedido ${order.id}</h3>
                <div class="order-date">üìÖ ${new Date(order.date).toLocaleDateString('es-ES', { 
                  year: 'numeric', 
                  month: 'long', 
                  day: 'numeric' 
                })}</div>
              </div>
              <div class="order-status status-${order.status}">
                ${getStatusText(order.status)}
              </div>
              <div class="order-total">$${order.total.toFixed(2)}</div>
            </div>
          </div>
          <div class="order-body">
            <div class="order-products">
              <h4 class="products-title">üì¶ Productos (${order.products.length})</h4>
              ${order.products.map(product => `
                <div class="product-item">
                  <div class="product-info">
                    <div class="product-icon">${product.icon}</div>
                    <div class="product-details">
                      <h4>${product.name}</h4>
                      <p>${product.description}</p>
                    </div>
                  </div>
                  <div class="product-quantity">Cant: ${product.quantity}</div>
                  <div class="product-price">$${(product.price * product.quantity).toFixed(2)}</div>
                </div>
              `).join('')}
            </div>
            <div class="order-details">
              <h4 class="products-title">üìã Detalles del Pedido</h4>
              <div class="details-grid">
                <div class="detail-item">
                  <div class="detail-label">üìç Direcci√≥n de Entrega</div>
                  <div class="detail-value">${order.deliveryAddress}</div>
                </div>
                <div class="detail-item">
                  <div class="detail-label">üìã N√∫mero de Seguimiento</div>
                  <div class="detail-value">${order.trackingNumber}</div>
                </div>
                <div class="detail-item">
                  <div class="detail-label">üìä Estado</div>
                  <div class="detail-value">${getStatusText(order.status)}</div>
                </div>
                <div class="detail-item">
                  <div class="detail-label">üí∞ Total</div>
                  <div class="detail-value">$${order.total.toFixed(2)}</div>
                </div>
              </div>
            </div>
            <div class="order-actions">
              ${order.status === 'pending' || order.status === 'processing' ? `
                <button class="action-btn btn-danger" onclick="cancelOrder('${order.id}')">
                  ‚ùå Cancelar Pedido
                </button>
              ` : ''}
              ${order.status === 'shipped' || order.status === 'delivered' ? `
                <button class="action-btn btn-primary" onclick="trackOrder('${order.trackingNumber}')">
                  üìç Rastrear Pedido
                </button>
              ` : ''}
              ${order.status === 'delivered' ? `
                <button class="action-btn btn-secondary" onclick="reorderProducts('${order.id}')">
                  üîÑ Volver a Pedir
                </button>
              ` : ''}
              <button class="action-btn btn-primary" onclick="downloadInvoice('${order.id}')">
                üìÑ Descargar Factura
              </button>
            </div>
          </div>
        `;
        ordersList.appendChild(orderCard);
      });
    }

    function updateOrderStats() {
      const totalOrdersEl = document.getElementById('totalOrders');
      const totalSpentEl = document.getElementById('totalSpent');
      const deliveredOrdersEl = document.getElementById('deliveredOrders');
      const pendingOrdersEl = document.getElementById('pendingOrders');

      const totalOrders = orders.length;
      const totalSpent = orders.reduce((sum, order) => sum + order.total, 0);
      const deliveredOrders = orders.filter(order => order.status === 'delivered').length;
      const pendingOrders = orders.filter(order => 
        order.status === 'pending' || order.status === 'processing' || order.status === 'shipped'
      ).length;

      totalOrdersEl.textContent = totalOrders;
      totalSpentEl.textContent = `$${totalSpent.toFixed(2)}`;
      deliveredOrdersEl.textContent = deliveredOrders;
      pendingOrdersEl.textContent = pendingOrders;
    }

    function applyFilters() {
      const statusFilter = document.getElementById('statusFilter').value;
      const dateFromFilter = document.getElementById('dateFromFilter').value;
      const dateToFilter = document.getElementById('dateToFilter').value;
      const amountFilter = parseFloat(document.getElementById('amountFilter').value) || 0;

      filteredOrders = orders.filter(order => {
        let matches = true;

        if (statusFilter && order.status !== statusFilter) {
          matches = false;
        }

        if (dateFromFilter && order.date < dateFromFilter) {
          matches = false;
        }

        if (dateToFilter && order.date > dateToFilter) {
          matches = false;
        }

        if (amountFilter && order.total < amountFilter) {
          matches = false;
        }

        return matches;
      });

      renderOrders();
      showAlert('üîç Filtros aplicados correctamente');
    }

    function clearFilters() {
      document.getElementById('statusFilter').value = '';
      document.getElementById('dateFromFilter').value = '';
      document.getElementById('dateToFilter').value = '';
      document.getElementById('amountFilter').value = '';
      
      filteredOrders = [...orders];
      renderOrders();
      showAlert('üßπ Filtros eliminados');
    }

    function cancelOrder(orderId) {
      Swal.fire({
        title: '¬øCancelar pedido?',
        text: "Esta acci√≥n no se puede deshacer",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#dc3545',
        cancelButtonColor: '#6c757d',
        confirmButtonText: 'S√≠, cancelar',
        cancelButtonText: 'No cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          const orderIndex = orders.findIndex(order => order.id === orderId);
          if (orderIndex !== -1) {
            orders[orderIndex].status = 'cancelled';
            localStorage.setItem('orders', JSON.stringify(orders));
            applyFilters();
            updateOrderStats();
            Swal.fire('Cancelado', 'Tu pedido ha sido cancelado', 'success');
          }
        }
      });
    }

    function trackOrder(trackingNumber) {
      Swal.fire({
        title: 'Rastreo de Pedido',
        html: `
          <div style="text-align: left; padding: 1rem;">
            <p><strong>N√∫mero de seguimiento:</strong> ${trackingNumber}</p>
            <br>
            <div style="border-left: 3px solid #00A8E8; padding-left: 1rem;">
              <p>‚úÖ <strong>Pedido confirmado</strong> - ${new Date().toLocaleDateString()}</p>
              <p>üì¶ <strong>En preparaci√≥n</strong> - ${new Date().toLocaleDateString()}</p>
              <p>üöö <strong>En tr√°nsito</strong> - ${new Date().toLocaleDateString()}</p>
              <p>üìç <strong>En tu ciudad</strong> - Estimado para hoy</p>
            </div>
          </div>
        `,
        icon: 'info',
        confirmButtonColor: '#00A8E8'
      });
    }

    function reorderProducts(orderId) {
      const order = orders.find(order => order.id === orderId);
      if (order) {
        order.products.forEach(product => {
          const existingItem = cart.find(item => item.id === product.id);
          if (existingItem) {
            existingItem.cantidad += product.quantity;
          } else {
            cart.push({
              id: product.id,
              name: product.name,
              description: product.description,
              icon: product.icon,
              price: product.price,
              cantidad: product.quantity
            });
          }
        });
        
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        showAlert('üõí Productos agregados al carrito');
      }
    }

    function downloadInvoice(orderId) {
      showAlert('üìÑ Descargando factura...');
      // Simular descarga
      setTimeout(() => {
        showAlert('‚úÖ Factura descargada exitosamente');
      }, 2000);
    }

    // Eventos del carrito
    document.getElementById('vaciarCarrito').addEventListener('click', function() {
      if (cart.length > 0) {
        Swal.fire({
          title: '¬øVaciar carrito?',
          text: "Se eliminar√°n todos los productos del carrito",
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#dc3545',
          cancelButtonColor: '#6c757d',
          confirmButtonText: 'S√≠, vaciar',
          cancelButtonText: 'Cancelar'
        }).then((result) => {
          if (result.isConfirmed) {
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            mostrarCarrito();
            showAlert('üóëÔ∏è Carrito vaciado');
          }
        });
      }
    });

    document.getElementById('comprarAhora').addEventListener('click', function() {
      if (cart.length === 0) {
        showAlert('‚ùå El carrito est√° vac√≠o');
        return;
      }

      Swal.fire({
        title: '¬øConfirmar compra?',
        text: `Total a pagar: $${cart.reduce((sum, item) => sum + (item.price * item.cantidad), 0).toFixed(2)}`,
        icon: 'question',
        showCancelButton: true,
        confirmButtonColor: '#00A8E8',
        cancelButtonColor: '#6c757d',
        confirmButtonText: 'Confirmar compra',
        cancelButtonText: 'Cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          const total = cart.reduce((sum, item) => sum + (item.price * item.cantidad), 0);
          const newOrder = {
            id: `ORD-${new Date().getFullYear()}-${String(Date.now()).slice(-3)}`,
            date: new Date().toISOString().split('T')[0],
            status: 'pending',
            total: total,
            products: cart.map(item => ({
              id: item.id,
              name: item.name,
              description: item.description,
              icon: item.icon,
              quantity: item.cantidad,
              price: item.price
            })),
            deliveryAddress: 'Direcci√≥n de entrega por defecto',
            trackingNumber: `TRK${Date.now()}`
          };

          orders.unshift(newOrder);
          localStorage.setItem('orders', JSON.stringify(orders));
          
          cart = [];
          localStorage.setItem('cart', JSON.stringify(cart));
          updateCartCount();
          mostrarCarrito();
          
          document.getElementById('carritoComprado').classList.remove('disabled');
          document.getElementById('carritoAcciones').classList.add('disabled');
          
          setTimeout(() => {
            closeCart();
            applyFilters();
            updateOrderStats();
          }, 2000);
          
          showAlert('‚úì ¬°Compra realizada con √©xito!');
        }
      });
    });

    function showAlert(message) {
      const alert = document.getElementById('alert');
      alert.textContent = message;
      alert.className = 'alert show';
      
      setTimeout(() => {
        alert.classList.remove('show');
      }, 3000);
    }

    function logout() {
      localStorage.removeItem('loggedUser');
      window.location.href = '../index.html';
    }

    document.getElementById('cartModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeCart();
      }
    });

    // Men√∫ lateral
    const menuBtn = document.getElementById('menu-btn');
    const sideMenu = document.getElementById('side-menu');
    const closeBtn = document.getElementById('close-btn');
    const menuOverlay = document.getElementById('menu-overlay');

    if (menuBtn && sideMenu && closeBtn) {
      menuBtn.addEventListener('click', () => {
        sideMenu.classList.add('active');
        menuOverlay.classList.add('active');
      });

      closeBtn.addEventListener('click', () => {
        sideMenu.classList.remove('active');
        menuOverlay.classList.remove('active');
      });

      menuOverlay.addEventListener('click', () => {
        sideMenu.classList.remove('active');
        menuOverlay.classList.remove('active');
      });
    }

    // Inicializaci√≥n
    window.onload = function() {
      // cargar helper de usuario
      const s = document.createElement('script');
      s.src = '../assets/js/user.js';
      s.onload = function() {
        const u = getDisplayUser();
        if (!u || !u.displayName) {
          window.location.href = '../index.html';
          return;
        }
        if (typeof getNameOnly === 'function') {
          document.getElementById('userName').textContent = getNameOnly();
        } else {
          document.getElementById('userName').textContent = 'Usuario';
        }
        updateCartCount();
      };
      document.head.appendChild(s);
      
      initializeOrders();
      updateOrderStats();
      renderOrders();
    };
  </script>
</body>
</html>